# Claude Telegram Bot

Телеграм-бот, подключенный к Claude AI от Anthropic, позволяющий пользователям общаться с Claude через Telegram и отправлять ему файлы и изображения.

## Возможности

- Общение с Claude AI через Telegram
- Загрузка и обмен изображениями с Claude
- Загрузка и обмен файлами/документами с Claude
- Управление историей диалогов
- Простой командный интерфейс

## Подготовка к использованию

### Требования

- Node.js 16 или выше
- Токен Telegram Bot (получить у BotFather)
- API-ключ Anthropic (получить от Anthropic)

### Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/ваш-логин/claude-telegram-bot.git
cd claude-telegram-bot
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

4. Отредактируйте файл `.env` и добавьте ваш Telegram Bot Token и API ключ Anthropic.

### Запуск бота

#### Режим разработки

```bash
npm run dev
```

#### Режим продакшн

Используйте скрипт деплоя:

```bash
./deploy.sh start   # Запустить бота
./deploy.sh stop    # Остановить бота
./deploy.sh restart # Перезапустить бота
./deploy.sh status  # Проверить статус бота
```

### Деплой на Railway

Подробная инструкция по деплою на Railway содержится в файле [RAILWAY_MANUAL_DEPLOY.md](RAILWAY_MANUAL_DEPLOY.md).

## Использование бота

1. Запустите чат с вашим ботом в Telegram
2. Используйте `/start` для начала
3. Просто отправляйте сообщения, чтобы пообщаться с Claude
4. Загружайте изображения или файлы, чтобы поделиться с Claude
5. Используйте `/clear` для очистки истории диалога
6. Используйте `/history` для просмотра истории диалога
7. Используйте `/help` для просмотра доступных команд

## Загрузка файлов и изображений

Бот теперь может получать изображения и файлы. Когда пользователь загружает файл:

1. Файл загружается и сохраняется в директории `uploads`
2. Файл становится доступен через локальный веб-сервер
3. URL файла отправляется Claude как часть диалога
4. Claude может обсуждать файлы на основе их описаний и URL

## Переменные окружения

- `TELEGRAM_BOT_TOKEN`: Токен вашего Telegram бота от BotFather
- `ANTHROPIC_API_KEY`: Ваш API ключ Anthropic
- `ANTHROPIC_MODEL`: Используемая модель Claude (например, claude-3-7-sonnet-20240307)
- `SERVER_URL`: URL для доступа к загруженным файлам (по умолчанию: http://localhost:3000)
- `PORT`: Порт для файлового сервера (по умолчанию: 3000)
- `IS_HEROKU`: Флаг для указания, что приложение запущено в среде с временной файловой системой (например, Heroku, Railway)

## Лицензия

MIT 